<html>

<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <script src="js/data.js"></script>
    <script src="js/baritone.js"></script>
    <meta name="msapplication-tap-highlight" content="no" />
    <title>Ukulele Chords</title>
</head>

<body>
    <br>
    <h1>Ukulele Chord</h1>

    <div id="content">
        <div class="select-style">
            <select id="instrument" onchange="displayChord()">
                <option>Ukulele</option>
                <option>Baritone</option>
            </select>
        </div>
        <br>
        <div class="select-style">
            <select id="chord" onchange="displayChord()" ;>
                <option>Select</option>
                <option>A</option>
                <option>Bb</option>
                <option>B</option>
                <option>C</option>
                <option>C#</option>
                <option>D</option>
                <option>E</option>
                <option>Eb</option>
                <option>F</option>
                <option>F#</option>
                <option>G</option>
                <option>G#</option>
            </select>
        </div>
        <br>
        <div class="select-style">
            <select id="scale" onchange="displayChord()" ;>
                <option>Major</option>
                <option>Aug</option>
                <option>Dim</option>
                <option>6th</option>
                <option>Minor 6</option>
                <option>7th</option>
                <option>Major 7</option>
                <option>Minor</option>
                <option>Minor 7</option>
                <option>Sus 2</option>
                <option>Sus 4</option>
                <option>7 Sus 4</option>
                <option>9th</option>
                <option>Add 9</option>
                <option>Minor 9</option>
            </select>
        </div>
        <br>
        <br>
        <canvas id="myCanvas" width="100" height="125"></canvas>
    </div>
    <script type="text/javascript">
        function displayChord() {
            var instrument = document.getElementById("instrument").value;
            var obj = instrument == 'Ukulele' ? data : baritone;
            console.log(instrument == 'Ukulele');
            var chord = document.getElementById("chord").value;
            var scale = document.getElementById("scale").value;
            var canvas = document.getElementById('myCanvas');

            buildBoard(canvas);
            var finger = obj[scale][chord].split(" ");
            for (var i = 0; i <= 3; i++) {
                if (finger[i] != "0") {
                    placeFinger(canvas, i * 25 + 12, finger[i] * 25);
                }
            }
        }

        function buildBoard(canvas) {
            context = canvas.getContext('2d');
            context.beginPath();
            context.rect(0, 0, 100, 125);
            context.fillStyle = '#fff';
            context.fill();
            context.lineWidth = 2;

            context.rect(12, 12, 76, 101);
            context.rect(12 + 25, 12, 25, 101);

            context.rect(12, 12 + 25, 76, 25);
            context.rect(12, 12 + 50, 76, 25);

            context.strokeStyle = '#000';
            context.stroke();
        }

        function placeFinger(canvas, x, y) {
            context = canvas.getContext('2d');
            context.beginPath();
            context.lineWidth = 1;
            context.arc(x, y, 7, 0, 2 * Math.PI, false);
            context.fillStyle = 'green';
            context.fill();
            context.strokeStyle = '#000';
            context.stroke();
        }

        var canvas = document.getElementById('myCanvas');
        buildBoard(canvas);
    </script>
</body>

</html>
